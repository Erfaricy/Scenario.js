/* Scenario.js v1.0.0
 * The MIT License (MIT)
 * Copyright (c) 2014 Maker Studios */
(function(a,b){"use strict";var c="Scenario",d=d||function(a){var c,d,e,f,g=this;return c={ranTests:{},weights:{},totalWeights:0,doTrack:!0},d={},e={track:function(a,b,d){c.doTrack!==!1&&("undefined"!=typeof b?mixpanel.track(a,b,d):mixpanel.track(a,!1,d))},toSlug:function(a){return a.toLowerCase().replace(/-+/g,"").replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")},sortArgs:function(a){var b,c={weight:1};for(b in a)switch(typeof a[b]){case"string":c.testName=a[b];break;case"function":c.fn=a[b];break;case"number":c.weight=a[b]}return c},chooseWeightedItem:function(){var a,b=[];for(a in c.weights)for(var d=c.weights[a];d--;)b.push(parseInt(a));return b[Math.floor(Math.random()*b.length)]}},f={test:function(b){c.doTrack=b===!1?!1:!0;var f=e.sortArgs(arguments),h=d[a].length;return d[a].push({name:f.testName,fn:f.fn,weight:f.weight}),c.weights[h]=f.weight,c.totalWeights+=f.weight,g},go:function(){var f=e.chooseWeightedItem(),h=d[a][f],i=e.toSlug(h.name);return b.body.className+=" "+i,c.ranTests[a]=h.name,e.track(a+" Start",{Tests:h.name}),"function"==typeof h.fn&&h.fn.call(null,{name:h.name,slug:i,weight:h.weight+"/"+c.totalWeights,odds:Math.floor(h.weight/c.totalWeights*100)}),g.complete=function(b){return e.track(a+" Finish",null,b)},g}},d[a]=d[a]||[],f};this[c]=d}).call(this,window,document);Scenario.version='1.0.0';